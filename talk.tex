\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{textcomp}
\usepackage{fancyvrb}

\title{Exploration Oriented Programmming Nitpicks}
\subtitle{REPL to Production}
\author{Moshe Zadka -- https://cobordism.com}
\date{North Bay Python 2018}
 
\begin{document}
 
\begin{titlepage}
\maketitle
\end{titlepage}

\frame{\titlepage}

\begin{frame}
\frametitle{What is Jupyter?}

\begin{itemize}
\item Web interface
\item Kernel
\item Persistent history
\item Other goodies!
\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Kernel}

\begin{itemize}
\item Handles snippets
\item In-memory state
\item Semi-disposable
\item Tornado event loop
\end{itemize}

\end{frame}

\begin{frame}[fragile]
\frametitle{Magic}

\begin{lstlisting}
%%pdb
\end{lstlisting}

\begin{lstlisting}
%% capture output
...
\end{lstlisting}

\end{frame}

\begin{frame}[fragile]
\frametitle{Managing Kernels}

\begin{lstlisting}
def add_to(kernel_venv, jupyter_venv):
    python = os.path.join(kernel_venv, 'bin', 'python')
    name = os.path.basename(kernel_venv)
    subprocess.check_call([python, '-m',
                           'pip', 'install', 'ipykernel'])
    subprocess.check_call([python, '-m',
                           'ipykernel', 'install',
                           '--name', name,
                           '--display-name', name,
                           '--prefix', venv])
    jupyter = os.path.join(jupyter_venv, 'bin', 'jupyter')
    spec = os.path.join(venv, 'share/jupyter/kernels', name)
    subprocess.check_call([jupyter, 'kernelspec', 'install', spec])
\end{lstlisting}
\end{frame}

\begin{frame}
\frametitle{Security Model}

\begin{itemize}
\item Opaque security token
\item By default, listen only on localhost
\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Notebooks}

\begin{itemize}
\item Editable history
\item Inputs and outputs
\item Code, not state
\end{itemize}

\end{frame}

\begin{frame}[fragile]
\frametitle{Notebooks from the Inside}

\begin{lstlisting}
{
 "cells": [
  { "cell_type": "code",
   ...
    "source": ["1 + 1"]
  }
 ]
 "nbformat": 4,
 "nbformat_minor": 1
}
\end{lstlisting}

\end{frame}

7 minute mark

\begin{frame}
\frametitle{REPL History}
\end{frame}

\begin{frame}[fragile]
\frametitle{Global namespace}

\begin{lstlisting}[frame=single]
some_thing = 15
\end{lstlisting}

\begin{lstlisting}[frame=single]
some_thing * 2
\end{lstlisting}

\begin{lstlisting}[frame=single]
30
\end{lstlisting}

\end{frame}

\begin{frame}[fragile]
\frametitle{Redefining functions}

\begin{lstlisting}[frame=single]
def foo(a):
    return 2 * a
\end{lstlisting}

\begin{lstlisting}[frame=single]
foo(10)
\end{lstlisting}

\begin{lstlisting}[frame=single]
20
\end{lstlisting}

\begin{lstlisting}[frame=single]
def foo(a):
    return 3 * a
\end{lstlisting}

\begin{lstlisting}[frame=single]
30
\end{lstlisting}

\end{frame}

%\begin{frame}
%\frametitle{Immutable data structures}
%\end{frame}
%
%\begin{frame}
%\frametitle{Verification as testing}
%\end{frame}
%
%\begin{frame}
%\frametitle{Classes}
%\end{frame}
%
%\begin{frame}
%\frametitle{Dispatching}
%\end{frame}
%
%14 minute mark
%
%\begin{frame}
%\frametitle{Version control}
%\end{frame}
%
%\begin{frame}
%\frametitle{Cleaning outputs}
%\end{frame}
%
%\begin{frame}
%\frametitle{Lint}
%\end{frame}
%
%\begin{frame}
%\frametitle{Test}
%\end{frame}
%
%\begin{frame}
%\frametitle{Custom diff}
%\end{frame}
%
%\begin{frame}
%\frametitle{Custom merge}
%\end{frame}
%
%21 minute mark
%
%\begin{frame}
%\frametitle{Importing notebooks}
%\end{frame}
%
%\begin{frame}
%\frametitle{Integrating with packages}
%\end{frame}
%
%\begin{frame}
%\frametitle{Producing documentation}
%\end{frame}
%
%\begin{frame}
%\frametitle{Producing documentation}
%\end{frame}
%
%\begin{frame}
%\frametitle{Building wheels}
%\end{frame}
%
%\begin{frame}
%\frametitle{Exporting API}
%\end{frame}
%
%28 minute mark
%
%\begin{frame}
%\frametitle{Code as Successive Approximation}
%\end{frame}
%
%\begin{frame}
%\frametitle{REPL as IDE}
%\end{frame}
%
%\begin{frame}
%\frametitle{Our predecessors}
%Lisp
%Smalltalk
%Logo
%\end{frame}
%
\end{document}
